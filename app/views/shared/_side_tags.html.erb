<div class="container">
  <div class="row">
    <div class="col sidebar-tags">
      <% if defined?(@tags) %>
        <div id="tags-list-heading"><%= t('tags.overlapping_tags') %></div>
      <% end %>
      <% @tags_list.each do |tag| %>
        <span class="sidebar-tag">
          <% if defined?(@tags) %>
            <% tags_query_param=(@tags + [tag]).join(',') %>
            <% if action_name == 'search' %>
              <%= icon_link("add", bookmarks_search_path(query: params[:query], tags: tags_query_param),
                    link_css: "inline-icon-link",
                    icon_css: "add-tag-icon",
                    alt: t('tags.add_tag_to_query'),
                    title: t('tags.add_tag_to_query')
                  )
                  %>
            <% else %>
              <%= icon_link("add", bookmarks_tagged_with_path(tags: tags_query_param),
                    link_css: "inline-icon-link",
                    icon_css: "add-tag-icon",
                    alt: t('tags.add_tag_to_query'),
                    title: t('tags.add_tag_to_query')
                  )
                  %>
            <% end %>
          <% elsif action_name == 'search' %>
            <%= icon_link("add", bookmarks_search_path(query: params[:query], tags: tag),
                  link_css: "inline-icon-link",
                  icon_css: "add-tag-icon",
                  alt: t('tags.add_tag_to_query'),
                  title: t('tags.add_tag_to_query')
                )
                %>
          <% end %>
          <%= link_to(tag, bookmarks_tagged_with_path(tags: tag)) %>
        </span>
      <% end %>
    </div>
  </div>
</div>

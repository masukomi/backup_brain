<div class="container">

<% archive = nil
   if ! params[:archive_id].present?
     archive = @bookmark.latest_archive('text/markdown'))
   else
     archive = @bookmark.archives.where(:_id => params[:archive_id])
   end
%>

<% if ! archive.nil?  %>
  <div class="row">
    <div class="col">
      <%#TODO deal with rendering archives that might not be markdown %>
      <%= render partial: 'bookmark_md_archive',
          locals: {archive: archive} %>
    </div>
  </div>
<% else %>
  <div class="row alert alert-warning">
    <div class="col">
      <%= t('errors.bookmarks.no_archive_found') %>
    </div>
  </div>
<% end %>

<hr />
<div class="container">
  <div class="row">
    <div class="col">
      <%= link_to "Edit this bookmark", edit_bookmark_path(@bookmark) %> |
      <%= link_to "Back to bookmarks", bookmarks_path %>

      <%= button_to "Destroy this bookmark", @bookmark, method: :delete %>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col">
      <h3><%= t("bookmarks.archives_list_heading") %></h3>
      <ul id="bookmark-archives-listing">
        <% @bookmark.sorted_archives.each do | archive | %>
          <li><%= show_archive_link(archive) %></li>
        <% end %>
      </ul>
    </div>
  </div>
</div>
